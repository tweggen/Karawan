{
  "lsystems": [
    {
      "name": "tree1",
      "description": "Simple branching tree with green foliage",
      "seed": {
        "parts": [
          { "name": "rotate(d,x,y,z)", "params": { "d": 90, "x": 0, "y": 0, "z": 1 } },
          { "name": "rotate(d,x,y,z)", "params": { "d": "rnd() * 359", "x": 1, "y": 0, "z": 0 } },
          { "name": "stem(r,l)", "params": { "r": 0.10, "l": "1 + 3 * rnd()" } }
        ]
      },
      "rules": [
        {
          "match": "stem(r,l)",
          "probability": 1.0,
          "condition": "$r > 0.02 && $l > 0.1",
          "transform": [
            { "name": "stem(r,l)", "params": { "r": "$r * 1.05", "l": "$l * 0.8" } },
            { "name": "push()" },
            { "name": "rotate(d,x,y,z)", "params": { "d": "30 + rnd() * 30", "x": 0, "y": 0, "z": 1 } },
            { "name": "stem(r,l)", "params": { "r": "$r * 0.6", "l": "$l * 0.8" } },
            { "name": "pop()" },
            { "name": "push()" },
            { "name": "rotate(d,x,y,z)", "params": { "d": "-30 + rnd() * 30", "x": 0, "y": 0, "z": 1 } },
            { "name": "stem(r,l)", "params": { "r": "$r * 0.6", "l": "$l * 0.8" } },
            { "name": "pop()" },
            { "name": "rotate(d,x,y,z)", "params": { "d": "90 + rnd() * 20", "x": 1, "y": 0, "z": 0 } },
            { "name": "stem(r,l)", "params": { "r": "$r * 0.8", "l": "$l * 0.5" } }
          ]
        }
      ],
      "macros": [
        {
          "match": "stem(r,l)",
          "probability": 1.0,
          "transform": [
            { "name": "fillrgb(r,g,b)", "params": { "r": 0.2, "g": 0.7, "b": 0.1 } },
            { "name": "cyl(r,l)", "params": { "r": "$r", "l": "$l" } }
          ]
        }
      ]
    },
    {
      "name": "tree2",
      "description": "Branching tree with color-graded foliage based on branch size",
      "seed": {
        "parts": [
          { "name": "rotate(d,x,y,z)", "params": { "d": 90, "x": 0, "y": 0, "z": 1 } },
          { "name": "rotate(d,x,y,z)", "params": { "d": "rnd() * 359", "x": 1, "y": 0, "z": 0 } },
          { "name": "stem(r,l)", "params": { "r": 0.1, "l": "1 + 3 * rnd()" } }
        ]
      },
      "rules": [
        {
          "match": "stem(r,l)",
          "probability": 1.0,
          "condition": "$r > 0.02 && $l > 0.1",
          "transform": [
            { "name": "stem(r,l)", "params": { "r": "$r * 1.05", "l": "$l * 0.8" } },
            { "name": "push()" },
            { "name": "rotate(d,x,y,z)", "params": { "d": "30 + rnd() * 30", "x": 0, "y": 0, "z": 1 } },
            { "name": "stem(r,l)", "params": { "r": "$r * 0.6", "l": "$l * 0.8" } },
            { "name": "pop()" },
            { "name": "push()" },
            { "name": "rotate(d,x,y,z)", "params": { "d": "-30 + rnd() * 30", "x": 0, "y": 0, "z": 1 } },
            { "name": "stem(r,l)", "params": { "r": "$r * 0.6", "l": "$l * 0.8" } },
            { "name": "pop()" },
            { "name": "rotate(d,x,y,z)", "params": { "d": "90 + rnd() * 20", "x": 1, "y": 0, "z": 0 } }
          ]
        }
      ],
      "macros": [
        {
          "match": "stem(r,l)",
          "probability": 1.0,
          "condition": "$r > 0.06",
          "transform": [
            { "name": "fillrgb(r,g,b)", "params": { "r": 0.4, "g": 0.2, "b": 0.1 } },
            { "name": "cyl(r,l)", "params": { "r": "$r", "l": "$l" } }
          ]
        },
        {
          "match": "stem(r,l)",
          "probability": 1.0,
          "condition": "$r <= 0.06 && $r > 0.04",
          "transform": [
            { "name": "fillrgb(r,g,b)", "params": { "r": 0.3, "g": 0.5, "b": 0.1 } },
            { "name": "flat(r,l)", "params": { "r": "$r", "l": "$l" } }
          ]
        },
        {
          "match": "stem(r,l)",
          "probability": 1.0,
          "condition": "$r <= 0.04",
          "transform": [
            { "name": "fillrgb(r,g,b)", "params": { "r": 0.2, "g": 0.4, "b": 0.8 } },
            { "name": "flat(r,l)", "params": { "r": "$r", "l": "$l" } }
          ]
        }
      ]
    },
    {
      "name": "house1",
      "description": "Procedural building with segmented floors - requires C# polygon operations",
      "type": "parametric",
      "config": {
        "storyHeight": 3.0,
        "minSegmentStories": 4,
        "shrinkAmount": 2.0,
        "segmentProbability": 0.8,
        "upperSegmentProbability": 0.9,
        "singleBlockProbability": 0.1,
        "materials": {
          "walls": "nogame.cities.houses.materials.houses.win3",
          "powerlines": "nogame.characters.house.materials.powerlines"
        }
      },
      "seed": {
        "parts": [
          { "name": "rotate(d,x,y,z)", "params": { "d": 90, "x": 0, "y": 0, "z": 1 } },
          { "name": "buildable(A,h)", "params": {} }
        ]
      },
      "rules": [
        {
          "match": "buildable(A,h)",
          "probability": 0.8,
          "condition": "$h > 12",
          "comment": "Split into base + upper segment (requires C# polygon shrink)"
        },
        {
          "match": "buildableAnySegment(A,h)",
          "probability": 0.9,
          "condition": "$h > 12",
          "comment": "Further segment upper parts (requires C# polygon shrink)"
        },
        {
          "match": "buildable(A,h)",
          "probability": 0.1,
          "condition": "$h > 12",
          "comment": "Single block building"
        },
        {
          "match": "buildable(A,h)",
          "probability": 1.0,
          "condition": "$h <= 12",
          "comment": "Small building - single base segment"
        }
      ],
      "macros": [
        {
          "match": "segment(A,h)",
          "probability": 1.0,
          "transform": [
            { "name": "extrudePoly(A,h,mat)", "params": { "mat": "nogame.cities.houses.materials.houses.win3" } }
          ]
        }
      ]
    }
  ]
}
